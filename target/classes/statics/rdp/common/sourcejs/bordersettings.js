!function(f){f.fn.borderSettings=function(e){e=f.extend({row:1,col:1},e);var l=f(this),n=l.find(".border_setting"),a={NONE:"none",MEDIUM_DASH_DOT_DOT:"dotted-2",HAIR:"dotted",SLANTED_DASH_DOT:"dotted-2",DOTTED:"dotted",MEDIUM_DASH_DOT:"dotted-2",DASH_DOT_DOT:"dotted-2",MEDIUM_DASHED:"dotted-2",DASH_DOT:"dotted",MEDIUM:"solid-2",DASHED:"dotted-2",THICK:"solid-3",THIN:"solid",DOUBLE:"double-3"},i={border:{setData:function(e){n.data("border-data",e)},getData:function(e){return n.data("border-data")},setDataAttr:function(e,r){var o=i.border.getData();o[e]=r,i.border.setData(o)},removeDataAttr:function(e){var r=i.border.getData();delete r[e],i.border.setData(r)},getDataAttr:function(e){return i.border.getData()[e]},setBorderColorAttr:function(e){var r=1,o="none",t=i.border.getDataAttr("color"),d=a[i.border.getDataAttr("borderType")];if(void 0!==d){var s=d.split("-");s[0]&&(o=s[0]),s[1]&&(r=s[1])}var b=function(e){"none"!=o&&(i.border.setDataAttr(e+"-width",r),i.border.setDataAttr(e+"-style",o),i.border.setDataAttr(e+"-color",t),i.border.setDataAttr(e+"-type",i.border.getDataAttr("borderType")))};"string"==typeof e?b(e):"object"==typeof e&&f.each(e,function(e,r){b(r)})},removeBorderColorAttr:function(e){"string"==typeof e?(i.border.removeDataAttr(e+"-width"),i.border.removeDataAttr(e+"-style"),i.border.removeDataAttr(e+"-color"),i.border.removeDataAttr(e+"-type")):"object"==typeof e&&f.each(e,function(e,r){i.border.removeBorderColorAttr(r)})},initBordershow:function(e,r){var o=l.find(".show_border_style");o.html("");var t=110,d=156;2<=e?(e=2,t=55):e=1,2<=r?(r=2,d=78):r=1;for(var s=0;s<e;s++){var b=f('<span class="show_border_row"></span>');t&&b.css("height",t+"px");for(var a=0;a<r;a++){var i=f('<span class="show_border_col"><span class="col_text">文本</span></span>');i.append(),b.append(i),d&&b.find(".show_border_col").css("width",d+"px")}o.append(b)}1==e&&1==r?(n.find(".border_type[oper-type='inner-border']").addClass("disabled"),n.find(".set_border_square[oper-type='border-center']").addClass("disabled"),n.find(".set_border_square[oper-type='border-middle']").addClass("disabled")):2==e&&2==r?(n.find(".border_type[oper-type='inner-border']").removeClass("disabled"),n.find(".set_border_square[oper-type='border-center']").removeClass("disabled"),n.find(".set_border_square[oper-type='border-middle']").removeClass("disabled")):1==e?n.find(".set_border_square[oper-type='border-center']").addClass("disabled"):1==r&&n.find(".set_border_square[oper-type='border-middle']").addClass("disabled")},borderColor:function(){l.find(".border_color .color_bar").spectrum({showInput:!0,allowEmpty:!0,showAlpha:!1,showPalette:!0,togglePaletteOnly:!0,hideAfterPaletteSelect:!0,showSelectionPalette:!0,cancelText:"取消",chooseText:"确认",togglePaletteMoreText:"更多",togglePaletteLessText:"简略",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],change:function(e){i.border.setBorderColorBar(e.toRgbString()),i.border.setDataAttr("color",e.toRgbString())},show:function(e){},move:function(e){}})},setBorderColorBar:function(e){var r=n.find(".border_style_item .style_items .s_item"),o=n.find(".border_color .color_item");r.css("background-color",e),o.text(""),o.css("background-color",e)},getBorderStyle:function(){var e=1,r="none",o=i.border.getDataAttr("color"),t=a[i.border.getDataAttr("borderType")];if(void 0!==t){var d=t.split("-");d[0]&&(r=d[0]),d[1]&&(e=d[1])}var s="";return"none"!=r&&(s=e+"px "+r+" "+o),s},borderSetEvent:function(){n.find(".border_style_item li").bind("click",function(){var e=f(this).attr("border-type");i.border.setDataAttr("borderType",e),f(this).siblings().find(".style_items").removeClass("active"),f(this).find(".style_items").addClass("active")});var s=n.find(".show_border_style");n.find(".border_preset .border_type").bind("click",function(){if(!f(this).hasClass("disabled")&&a[i.border.getDataAttr("borderType")]&&"none"!=a[i.border.getDataAttr("borderType")]){var e=f(this).attr("oper-type");if("none-border"==e){s.css({"border-top":"","border-left":"","border-bottom":"","border-right":""}),s.find(".show_border_row").eq(0).find(".show_border_col").eq(0).css({"border-right":"","border-bottom":""}),s.find(".show_border_row").eq(0).find(".show_border_col").eq(1).css({"border-bottom":""}),s.find(".show_border_row").eq(1).find(".show_border_col").eq(0).css({"border-right":""});var r=s.find(".show_border_row").eq(1).find(".show_border_col");i.border.setBorderStyle(r[0],"border-top",!0),i.border.setBorderStyle(r[1],"border-top",!0);var o=s.find(".show_border_row");i.border.setBorderStyle(o.eq(0).find(".show_border_col").eq(1),"border-left",!0),i.border.setBorderStyle(o.eq(1).find(".show_border_col").eq(1),"border-left",!0),i.border.removeBorderColorAttr(["border-top","border-left","border-bottom","border-right","border-center","border-middle"]),n.find(".border_show .set_border_square").removeClass("selected")}else if("margin-border"==e)s.css({"border-top":i.border.getBorderStyle(),"border-left":i.border.getBorderStyle(),"border-bottom":i.border.getBorderStyle(),"border-right":i.border.getBorderStyle()}),i.border.setBorderColorAttr(["border-top","border-left","border-bottom","border-right"]),n.find(".border_show .set_border_square[oper-type='border-top']").addClass("selected"),n.find(".border_show .set_border_square[oper-type='border-left']").addClass("selected"),n.find(".border_show .set_border_square[oper-type='border-right']").addClass("selected"),n.find(".border_show .set_border_square[oper-type='border-bottom']").addClass("selected");else if("inner-border"==e){i.border.setBorderColorAttr(["border-center","border-middle"]);r=s.find(".show_border_row").eq(1).find(".show_border_col");i.border.setBorderStyle(r[0],"border-top"),i.border.setBorderStyle(r[1],"border-top");o=s.find(".show_border_row");i.border.setBorderStyle(o.eq(0).find(".show_border_col").eq(1),"border-left"),i.border.setBorderStyle(o.eq(1).find(".show_border_col").eq(1),"border-left"),n.find(".border_show .set_border_square[oper-type='border-center']").addClass("selected"),n.find(".border_show .set_border_square[oper-type='border-middle']").addClass("selected")}}}),n.find(".border_show .set_border_square").bind("click",function(){if(!f(this).hasClass("disabled")&&a[i.border.getDataAttr("borderType")]&&"none"!=a[i.border.getDataAttr("borderType")]){var e=f(this).attr("oper-type"),r=(i.border.getDataAttr("color"),!0);r=f(this).hasClass("selected")?(f(this).removeClass("selected"),!0):(f(this).addClass("selected"),!1);var o=function(e,r){r?i.border.removeBorderColorAttr(e):i.border.setBorderColorAttr(e)};if("border-top"==e)i.border.setBorderStyle(s,"border-top",r),o("border-top",r);else if("border-center"==e){var t=s.find(".show_border_row").eq(1).find(".show_border_col");i.border.setBorderStyle(t[0],"border-top",r),i.border.setBorderStyle(t[1],"border-top",r),o("border-center",r)}else if("border-bottom"==e)i.border.setBorderStyle(s,"border-bottom",r),o("border-bottom",r);else if("border-left"==e)i.border.setBorderStyle(s,"border-left",r),o("border-left",r);else if("border-middle"==e){var d=s.find(".show_border_row");i.border.setBorderStyle(d.eq(0).find(".show_border_col").eq(1),"border-left",r),i.border.setBorderStyle(d.eq(1).find(".show_border_col").eq(1),"border-left",r),o("border-middle",r)}else"border-right"==e&&(i.border.setBorderStyle(s,"border-right",r),o("border-right",r))}})},setBorderStyle:function(e,r,o){o?f(e).css(r,""):f(e).css(r,i.border.getBorderStyle())},init:function(){i.border.setData({color:"rgb(0,0,0)"}),i.border.borderColor(),i.border.borderSetEvent(),i.border.initBordershow(e.row,e.col)}},initSetting:function(){l.find(".layui-layer-btn").css({"background-color":"#F0F0F0"}),l.find(".tab_menus li[tab-type='border']").addClass("selected"),l.find(".tab_menus li").bind("click",function(){"border"!=f(this).attr("tab-type")?layer.msg(f(this).text()+"属性配置，正在建设中..."):(f(this).addClass("selected"),f(this).siblings().removeClass("selected"))}),i.border.init()}};i.initSetting()}}(jQuery);